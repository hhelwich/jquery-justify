/*! jQuery Justify - v0.1.0-SNAPSHOT - 2012-12-26
 * https://github.com/hhelwich/jquery-justify
 * Copyright (c) 2012 Hendrik Helwich; Licensed MIT */
(function(e){"use strict";function t(e,t,n){if(e.length===0)return[];var r=[0],i,s=0,o=!0,u;for(i=0;i<e.length;i+=1)u=e[i].width,s+=u,s>t&&e[i].breakBefore!==!1?o?s=0:(r.push(i),s=u+n):s+=n,o=!1;return r}function n(e,n,r,i){var s=n,o=t(e,n,r),u=n,a=o,f;for(f=0;f<i;f+=1)s/=2,a.length>o.length?n+=s:(u>n&&(o=a,u=n),n-=s),a=t(e,n,r);return o}function r(e,t,r){var i,s,o,u,a,f=0,l=0,c,h,p,d=[],v,m;t-=r.marginLeft+r.marginRight,i=n(e,t,r.marginX,r.accuracy),p=i.length,d.length=e.length,h=r.marginTop;for(s=0,u=0;s<p;s+=1){a=i[s+1],a===undefined&&(a=e.length);for(o=0;u<a;u+=1,o+=1)l=Math.max(e[u].height,l),f+=e[u].width;c=(t-f)/(o-1),m=r.marginLeft;for(u=i[s];u<a;u+=1)v=h+~~((l-e[u].height)/2),d[u]={top:v+"px",left:~~m+"px"},m+=e[u].width+c;h+=l+r.marginY,f=0,l=0}return d.height=h-r.marginY+r.marginBottom,d}e.fn.justify=function(t){function d(){var e=n.width(),t,o;if(e===s)return!1;s=e,t=r(l,s,i),i.onChangeHeight(t.height);for(o=0;o<a;o+=1)l[o].item.css(t[o]);return!0}var n=this.first(),i=e.extend({itemSelector:"*",marginX:20,marginY:20,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,onChangeHeight:function(e){n.height(e)},accuracy:10},t),s,o=n.find(i.itemSelector),u,a=o.length,f="position",l=[],c,h=!1,p;n.css(f)==="static"&&n.css(f,"relative"),o.css(f,"absolute"),l.length=a;for(c=0;c<a;c+=1)u=e(o[c]),l[c]={item:u,width:u.width(),height:u.height(),breakBefore:!h},p=u.attr("data-block"),p!==undefined&&(p==="start"?h=!0:p==="end"&&(h=!1));u=undefined,e(window).resize(d);while(d());return this}})(jQuery);